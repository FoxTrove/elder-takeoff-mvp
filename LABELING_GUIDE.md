# Data Labeling Guide for Construction Takeoff

## Quick Start

### 1. Install LabelImg
```bash
pip install labelImg
```

### 2. Launch LabelImg
```bash
labelImg
```

## Step-by-Step Labeling Process

### Initial Setup
1. **Open Directory**: Click "Open Dir" ‚Üí Select `data_raw` folder
2. **Change Save Directory**: Click "Change Save Dir" ‚Üí Select `data_labeled/labels`
3. **Switch to YOLO Format**: Click the "PascalVOC" button until it shows "YOLO"
4. **Enable Auto-Save**: Check "View" ‚Üí "Auto Save mode" (optional but recommended)

### Using Marked-Up Drawings as Reference (Highly Recommended!)

**If Elder Construction provided marked-up drawings from their manual takeoff process:**

1. **Open marked-up drawing** in Preview or PDF viewer
2. **Position it next to LabelImg window** (dual monitor ideal, or side-by-side)
3. **In LabelImg, draw boxes where Elder marked** objects on their drawing
4. **Match Elder's judgment** on what to count and what to skip
5. **Verify count** matches Elder's takeoff spreadsheet

**Why this is valuable:**
- ‚úÖ Captures Elder's expertise and identification standards
- ‚úÖ Shows which symbols Elder counts vs. skips
- ‚úÖ Reveals how Elder handles edge cases and ambiguous situations
- ‚úÖ Trains AI to replicate Elder's specific process
- ‚úÖ Faster labeling (just copy Elder's marks)
- ‚úÖ Higher accuracy aligned with Elder's standards

**Example workflow:**
```
Left screen: LabelImg with clean blueprint image
Right screen: Elder's marked-up drawing showing circled outlets
Reference: Spreadsheet showing "Floor 1: 45 outlets"

Process:
- See Elder circled outlet at location X
- Draw box at same location in LabelImg
- Label it "outlet"
- Repeat for all Elder's marks
- Verify: 45 boxes = 45 in spreadsheet ‚úÖ
```

**If marked-up drawings aren't available:**
- Use takeoff spreadsheet counts as your guide
- Find and label objects yourself
- Verify your count matches the spreadsheet

### Labeling Workflow

#### For Each Image:
1. **Create Bounding Box**
   - Press `W` key or click "Create RectBox"
   - Click and drag to draw a box around the target object
   - Make the box tight around the object (not too loose)

2. **Assign Class Label**
   - A dialog will appear
   - Type the class name (e.g., "outlet", "door", "window")
   - Press Enter
   - **Important**: Use the same class name consistently!

3. **Save Annotation**
   - Press `Ctrl + S` or click "Save"
   - A `.txt` file will be created in `data_labeled/labels/`

4. **Move to Next Image**
   - Press `D` key or click "Next Image"

5. **Copy Labeled Image**
   - After labeling, copy the image file to `data_labeled/images/`
   - Keep the same filename

### Keyboard Shortcuts
- `W` - Create bounding box
- `D` - Next image
- `A` - Previous image
- `Ctrl + S` - Save
- `Del` - Delete selected box
- `Ctrl + U` - Load all images in directory

## Best Practices

### Bounding Box Guidelines
‚úÖ **DO:**
- Draw tight boxes around objects
- Include the entire object within the box
- Label all instances of the target object in each image
- Be consistent with box sizing

‚ùå **DON'T:**
- Leave large gaps around objects
- Cut off parts of objects
- Skip objects in the image
- Mix different object types under one label

### Class Naming
- Use lowercase (e.g., "outlet" not "Outlet")
- Use singular form (e.g., "door" not "doors")
- Be specific if needed (e.g., "outlet_duplex" vs "outlet_gfci")
- Keep names short and simple

### Quality Control
- Review your labels before moving to the next image
- Check that all objects are labeled
- Verify the class name is correct
- Ensure boxes are properly sized

## YOLO Format Explanation

Each `.txt` file contains one line per object:
```
<class_id> <x_center> <y_center> <width> <height>
```

Example:
```
0 0.5 0.3 0.1 0.15
0 0.7 0.6 0.12 0.14
```

- `class_id`: Integer starting from 0 (outlet=0, door=1, etc.)
- All coordinates are normalized (0.0 to 1.0)
- `x_center`, `y_center`: Center point of the box
- `width`, `height`: Box dimensions

**Note**: LabelImg generates this automatically‚Äîyou don't need to create these files manually!

## MVP Target: 5-10 Labeled Images

For the initial MVP, aim for:
- **Minimum**: 5 labeled images
- **Recommended**: 10-20 labeled images
- **Each image**: Should contain 1-10 instances of the target object

## Organizing Your Work

### Suggested Workflow:
1. Start with 5 clear, high-quality blueprint images
2. Label all instances of ONE object type (e.g., outlets only)
3. Copy labeled images to `data_labeled/images/`
4. Verify labels are in `data_labeled/labels/`
5. Run the training notebook
6. Evaluate results
7. Add more labeled data if needed

### File Organization:
```
data_raw/
  ‚îú‚îÄ‚îÄ blueprint_001.png
  ‚îú‚îÄ‚îÄ blueprint_002.png
  ‚îî‚îÄ‚îÄ ...

data_labeled/
  ‚îú‚îÄ‚îÄ images/
  ‚îÇ   ‚îú‚îÄ‚îÄ blueprint_001.png  (copy from data_raw after labeling)
  ‚îÇ   ‚îî‚îÄ‚îÄ blueprint_002.png
  ‚îî‚îÄ‚îÄ labels/
      ‚îú‚îÄ‚îÄ blueprint_001.txt  (auto-generated by LabelImg)
      ‚îî‚îÄ‚îÄ blueprint_002.txt
```

## Troubleshooting

### LabelImg Won't Start
```bash
pip install labelImg PyQt5
```

### Can't Switch to YOLO Format
- Click the "PascalVOC" text button (not a menu item)
- It should toggle to "YOLO"

### Labels Not Saving
- Check that "Change Save Dir" points to `data_labeled/labels/`
- Ensure the directory exists and has write permissions

### Wrong Class Name Used
- Delete the bounding box (select it and press `Del`)
- Create a new box with the correct class name

## Tips for Blueprint Images

### Good Blueprint Characteristics:
- Clear, high-contrast images
- Readable symbols and text
- Minimal noise or artifacts
- Consistent scale across images

### Handling Difficult Cases:
- **Overlapping objects**: Label each one separately
- **Partial objects**: Only label if >50% is visible
- **Unclear symbols**: Skip or mark for review
- **Different scales**: Label consistently regardless of size

## Next Steps After Labeling

1. Verify you have at least 5 labeled images
2. Check that images are in `data_labeled/images/`
3. Check that labels are in `data_labeled/labels/`
4. Open `notebooks/train_mvp.ipynb`
5. Run the training process
6. Evaluate results with `notebooks/test_mvp.ipynb`

Good luck with your labeling! üéØ
